<!DOCTYPE html>
<html lang=en>
<head>
	<title>PROG 2020 Poll: unofficial email composer</title>
	<meta charset=utf-8>
	<meta name=theme-color content=#202020>
	<link rel=stylesheet type=text/css href=style.css>
	<style>
		body {
			background-color: #202020;
		}
		.h{
			display: none;
		}
	</style>
	<script type=tpl name=farewell-en>Don't forget to actually send the message in the email app! Good luck!</script>
	<script type=tpl name=farewell-ru>–ù–µ –∑–∞–±—É–¥—å—Ç–µ –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–û—Ç–ø—Ä–∞–≤–∏—Ç—å" –≤ –≤–∞—à–µ–º –ø–æ—á—Ç–æ–≤–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏! –£–¥–∞—á–∏!</script>
	<script>
		const $ = (...args) => document.querySelector(...args),
			$$ = (...args) => Array.from(document.querySelectorAll(...args)),
			af = Array.from,
			URL = 'https://ravenymusic.github.io/progvote';

		function russiansCame() {
			if(window.navigator.language.search(/ru/ig) !== -1)
				return true;

			let ru = window.navigator.languages.join().search(/ru/ig);

			if(ru !== -1 && ru < 12)
				return true;

			return false;
		}

		function getTemplate(name, text = true) {
			let s = $(`script[type=tpl][name=${name}]`).innerText;

			return text
				? s.replace(/\t/g, '').trim()
				: s;
		}

		function wat() {
			if($('content.wat.h')) {
				$('content.form').classList.add('h');
				$('content.wat').classList.remove('h');
			}
			else {
				$('content.wat').classList.add('h');
				$('content.form').classList.remove('h');
			}

			window.scrollTo(0, 0);
		}

		function switchLanguage(lang, ev) {
			window.pageLang = lang;
			$$('[ln]').forEach(e => e.classList.add('h'));
			$$(`[ln=${lang}]`).forEach(e => e.classList.remove('h'));

			$$('header .lang a').forEach(a => a.classList.remove('current'));
			$(`header .lang a[href="#${lang}"]`).classList.add('current');

			if(ev) ev.preventDefaut();

			return false;
		}

		function getFields() {
			return $$('.form label').map(l => ({
				id: l.getAttribute('for'),
				name: l.innerText.toUpperCase(),
				val: $(`.form input#${l.getAttribute('for')}`).value
			}));
		}

		function safeString(s) {
			return s ? s.replace(/[\?\n\r\t]/g, '') : '';
		}

		function composeEmail() {
			return getFields()
			.map(({name, val}) => encodeURI(safeString(`${name}: ${val || '‚Äî'}`)))
			.join('%0D%0A');
		}

		function createEmail() {
			alert(getTemplate(window.pageLang === 'ru' ? 'farewell-ru' : 'farewell-en'))
			location.href='mailto:prog@futurenet.com?subject=vote&body='+composeEmail();
		}

		function getLink() {
			let data = encodeURI(
				JSON.stringify(
					getFields().map(({id, val}) => ({id, val: safeString(val)}))
				)
			);

			let t = $('#linkContainer');
			t.value = `${URL}/#data=${data}`;

			$('.prefilledLink').classList.remove('h');
			t.classList.add('open');

			t.focus();
			t.select();

			return false;
		}

		function readData() {
			let data = window.location.hash.match(/(data=)(.+)/);

			if(!data || !data[2] || data[2] === undefined)
				return false;

			try {
				data = JSON.parse(decodeURI(data[2]));
			}
			catch(e) {
				console.warn('found some data in hash, but could not parse it', e);

				return false;
			}

			return data.forEach(i => $(`content.form #${i.id}`).value = i.val);
		}

		function initPage() {
			switchLanguage(russiansCame() ? 'ru' : 'en');
			readData();

			// all set, go
			$('body').classList.remove('h');
		}

		window.addEventListener('load', initPage);
	</script>
</head>
<body class=h>
	<container>
		<header>
			<div class=left>
				<h3 class=title ln=en>Vote for musicians in PROG Mag</h3>
				<h3 class=title ln=ru>–ì–æ–ª–æ—Å–æ–≤–∞—Ç—å –∑–∞ –º—É–∑—ã–∫–∞–Ω—Ç–æ–≤ –≤ PROG Mag</h3>
				<sub ln=en><strong>unofficial</strong> poll email composer</sub>
				<sub ln=ru><strong>–Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è</strong> —Å–æ–∑–¥–∞–≤–∞–ª–∫–∞ –≥–æ–ª–æ—Å–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö email-–æ–≤</sub>
			</div>
			<div class=right>
				<div class=lang>
					<a href=#en onclick='return switchLanguage("en")' title='Switch to English'>üá¨üáß</a>
					<a href=#ru onclick='return switchLanguage("ru")' title='–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –†—É—Å—Å–∫–∏–π'>üá∑üá∫</a>
				</div>
				<div class=wat>
					<a ln=en href=#wat class=help onclick=wat()>what's this?</a>
					<a ln=ru href=#wat class=help onclick=wat()>—á—Ç–æ —ç—Ç–æ?</a>
				</div>
			</div>
		</header>

		<content class=form>
			<label for=A>Best Band</label>
			<input type=text id=A>

			<label for=B>Album Of The Year</label>
			<input type=text id=B>

			<label for=C>Female Vocalist</label>
			<input type=text id=C>

			<label for=D>Male Vocalist</label>
			<input type=text id=D>

			<label for=E>Guitarist</label>
			<input type=text id=E>

			<label for=F>Bassist</label>
			<input type=text id=F>

			<label for=G>Keyboard Player</label>
			<input type=text id=G>

			<label for=H>Drummer</label>
			<input type=text id=H>

			<label for=I>Reissue Of The Year</label>
			<input type=text id=I>

			<label for=J>Event Of The Year</label>
			<input type=text id=J>

			<label for=K>Disappointment Of The Year</label>
			<input type=text id=K>

			<label for=L>Best Unsigned Band</label>
			<input type=text id=L>

			<label for=M>Prog Person Of The Year</label>
			<input type=text id=M>

			<label for=N>Prog‚Äôs Unsung Hero</label>
			<input type=text id=N>

			<div class=buttons>
				<button onclick=createEmail()>
					<span ln=en>‚úâÔ∏è Create email</span>
					<span ln=ru>‚úâÔ∏è –°–æ–∑–¥–∞—Ç—å email</span>
				</button>

				<a href=# onclick='return getLink()'>Get a pre-filled link</a>

				<div class='prefilledLink h'>
					<textarea readonly id=linkContainer></textarea>
					<span ln=en>Use your favourite link-shortener service</span>
					<span ln=ru>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à –ª—é–±–∏–º—ã–π —Å–µ—Ä–≤–∏—Å —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫</span>
				</div>

				<button class=h onclick=showTextAndAddress()>
					<span ln=en>Show message text and address</span>
					<span ln=ru>–ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—Å—Ç –ø–∏—Å—å–º–∞ –∏ –∞–¥—Ä–µ—Å</span>
				</button>
			</div>
		</content>

		<content class='wat h'>
			<div ln=en>
				<p>
					PROG Mag is
					<a href='https://www.loudersound.com/news/vote-in-the-2020-prog-magazine-readers-poll' target=_blank>running a poll</a>
					among readers,
					listeners of Progressive Rock and similar music.
				</p>
				<p>
					The way they run it, though, is a little bit unsettling,
					considering it's almost 2021:
					you need to send an email formatted in a certain way.
				</p>
				<p>
					I mean, I personally love emails
					and I think they're better than all existing messengers, but...
					what about normal people? :)
				</p>
				<p>
					So, I decided to create this page to help my listeners
					and other people to compose and send an email in an easy way.
				</p>
				<p>
					After filling this form you'll have a pre-composed email message
					in your email app. It works best on smartphones, btw.
				</p>
				<p>
					If you still don't understand what's PROG,
					who are all the pre-selected artists you see in the form (if there are any),
					what are the albums and events... well, you can google them,
					or ask the person who gave you the link.
				<p>
					Should you vote if you don't know what it's all about? IDK.
				</p>

				<hr>

				<p>
					‚ö†Ô∏è <strong>IMPORTANT</strong>
					<br>
					PROG Mag is not affiliated with me or with this website in any way.
					No one asked me to create this page, it was my pure desire to make our world better.
				</p>
				<p>
					Everything you've seen in the pre-filled fields is encoded in the link you visited,
					the only person responsible for this is the one who sent you this link.
				</p>
				<p>
					You're free and welcome to change everything before pushing the main button,
					and you can even create your own link with your choices and share it to your friends,
					there's a button for this (not the main one).
				</p>

				<p>
					‚ö†Ô∏è <strong>EVEN MORE IMPORTANT</strong>
					<br>
					This webpage doesn't send any emails on your behalf.
				</p>
				<p>
					Anything you enter into the fields will be sent to your email app only
					after you press the button. If you don't click that button,
					everything will be lost once you close the web-browser tab.
				</p>
				<p>
					This website will never know anything about your email, the email app,
					or whether you'll actually send the composed letter at all.
				</p>
				<p>
					No cookies are stored on this page.
					This page is free from web-analytics and trackers of any kind.
				</p>

				<hr>

				<p>Have a good day!</p>

				<p><em>// Artyom, aka Raveny</em></p>

				<p><button onclick=wat()>Very well, show the form</button></p>
			</div>
			<div ln=ru>
				<p>
					–ñ—É—Ä–Ω–∞–ª PROG
					<a href='https://www.loudersound.com/news/vote-in-the-2020-prog-magazine-readers-poll' target=_blank>–ø—Ä–æ–≤–æ–¥–∏—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ</a>
					—Å—Ä–µ–¥–∏ —Å–≤–æ–∏—Ö —á–∏—Ç–∞—Ç–µ–ª–µ–π,
					–ø–æ—á–∏—Ç–∞—Ç–µ–ª–µ–π –º—É–∑—ã–∫–∏ –≤–æ–∫—Ä—É–≥ –∏ –æ–∫–æ–ª–æ Progressive Rock.
				</p>
				<p>
					–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Å–ø–æ—Å–æ–±, –∫–æ—Ç–æ—Ä—ã–º –æ–Ω–∏ —Ä–µ—à–∏–ª–∏ —ç—Ç–æ –ø—Ä–æ–≤–µ—Å—Ç–∏...
					–Ω–µ—Å–∫–æ–ª—å–∫–æ —É–¥–∏–≤–∏—Ç–µ–ª–µ–Ω –¥–ª—è –ø–æ—á—Ç–∏ —É–∂–µ 2021 –≥–æ–¥–∞:
					–≤–∞–º –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å email –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞.
				</p>
				<p>
					–í —Å–º—ã—Å–ª–µ, —è –∫–æ–Ω–µ—á–Ω–æ –æ—á–µ–Ω—å –ª—é–±–ª—é email,
					–∏ —Å—á–∏—Ç–∞—é —á—Ç–æ –æ–Ω–∏ –ª—É—á—à–µ –ª—é–±—ã—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤, –Ω–æ –≤—Å—ë –∂–µ...
				</p>
				<p>
					–í–æ—Ç —è –∏ —Ä–µ—à–∏–ª —Å–¥–µ–ª–∞—Ç—å —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—á–∫—É.
					–ó–¥–µ—Å—å –º–æ–∂–Ω–æ –±–æ–ª–µ–µ-–º–µ–Ω–µ–µ —É–¥–æ–±–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å—ë –∏ —Å–æ–∑–¥–∞—Ç—å email.
				</p>
				<p>
					–ü–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–ª–µ–π –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "O—Ç–ø—Ä–∞–≤–∏—Ç—å"
					–≤ email-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –õ—É—á—à–µ –≤—Å–µ–≥–æ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞—Ö, –∫—Å—Ç–∞—Ç–∏.
				</p>
				<p>
					–ï—Å–ª–∏ –≤—ã –Ω–µ –Ω–µ –∑–Ω–∞–µ—Ç–µ —á—Ç–æ —Ç–∞–∫–æ–µ PROG,
					–∏–ª–∏ –∫—Ç–æ –≤—Å–µ —É–∂–µ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ –ø–æ–ª—è—Ö –º—É–∑—ã–∫–∞–Ω—Ç—ã, –∞–ª—å–±–æ–º—ã –∏–ª–∏ —Å–æ–±—ã—Ç–∏—è ‚Äî
					–º–æ–∂–µ—Ç–µ –ø–æ–≥—É–≥–ª–∏—Ç—å –∏–ª–∏ —Å–ø—Ä–æ—Å–∏—Ç—å —Ç–æ–≥–æ, –∫—Ç–æ –ø—Ä–∏—Å–ª–∞–ª –≤–∞–º —Å—Å—ã–ª–∫—É.
				</p>
				<p>
					–ù—É–∂–Ω–æ –ª–∏ –≤–∞–º –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å, –µ—Å–ª–∏ –≤—ã –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç–µ –æ —á—ë–º —ç—Ç–æ –≤—Å—ë? –ù–µ –∑–Ω–∞—é.
				</p>

				<hr>

				<p>
					‚ö†Ô∏è <strong>–í–ê–ñ–ù–û</strong>
					<br>
					–≠—Ç–æ –≤—Å—ë –Ω–∏–∫–∞–∫ –Ω–µ —Å–≤—è–∑–∞–Ω–æ —Å –∂—É—Ä–Ω–∞–ª–æ–º PROG, –º–µ–Ω—è –Ω–∏–∫—Ç–æ –Ω–µ –ø—Ä–æ—Å–∏–ª —ç—Ç–æ –¥–µ–ª–∞—Ç—å.
					–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è –º–æ–µ–º—É –Ω–µ—É—ë–º–Ω–æ–º—É –∂–µ–ª–∞–Ω–∏—é –¥–µ–ª–∞—Ç—å –≤—Å—ë
					–≤–æ–∫—Ä—É–≥ –ø—Ä–æ—â–µ –∏ –ª—É—á—à–µ.
				</p>
				<p>
					–í—Å—ë —á—Ç–æ –±—ã–ª–æ —É–∫–∞–∑–∞–Ω–æ –≤ –ø–æ–ª—è—Ö –∫–æ–≥–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–∫—Ä—ã–ª–∞—Å—å –∑–∞–ø–∏—Å–∞–Ω–æ –≤ –≤–∞—à–µ–π —Å—Å—ã–ª–∫–µ,
					–ø–æ—á–µ–º—É —ç—Ç–æ —Ç–∞–º —É–∫–∞–∑–∞–Ω–æ –º–æ–∂–Ω–æ —Å–ø—Ä–æ—Å–∏—Ç—å —É —á–µ–ª–æ–≤–µ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –≤–∞–º —ç—Ç—É —Å—Å—ã–ª–∫—É –ø—Ä–∏—Å–ª–∞–ª.
				</p>
				<p>
					–í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –≤—Å—ë —á—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–æ –≤ —ç—Ç–∏—Ö –ø–æ–ª—è—Ö, –∏ –¥–∞–∂–µ –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Å–≤–æ—é —Å—Å—ã–ª–∫—É
					—Å –≤–∞—à–∏–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤, —Ç–∞–º –≤–Ω–∏–∑—É —Ñ–æ—Ä–º—ã –∫–Ω–æ–ø–∫–∞ –µ—Å—Ç—å –¥–ª—è —ç—Ç–æ–≥–æ.
				</p>
				<p>
					‚ö†Ô∏è <strong>–ï–©√ã –í–ê–ñ–ù–ï–ï</strong>
					<br>
					–≠—Ç–æ—Ç —Å–∞–π—Ç –Ω–∏–∫—É–¥–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç.
				</p>
				<p>
					–í—Å—ë —á—Ç–æ –≤—ã –≤–≤–µ–¥—ë—Ç–µ –≤ –ø–æ–ª—è —É–π–¥—ë—Ç –≤ –≤–∞—à –ø–æ—á—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∫–Ω–æ–ø–∫–∏ –∏ –±–æ–ª—å—à–µ –Ω–∏–∫—É–¥–∞.
					–ï—Å–ª–∏ –Ω–µ –Ω–∞–∂–º—ë—Ç–µ –∫–Ω–æ–ø–∫—É, —Ç–æ –≤—Å—ë –∏—Å—á–µ–∑–Ω–µ—Ç –Ω–∞–≤—Å–µ–≥–¥–∞ –∫–∞–∫ —Ç–æ–ª—å–∫–æ –≤—ã –∑–∞–∫—Ä–æ–µ—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.
				</p>
				<p>
					–≠—Ç–æ–º—É —Å–∞–π—Ç—É –Ω–µ –±—É–¥–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω–æ –Ω–∏—á–µ–≥–æ –æ –≤–∞—à–µ–π –ø–æ—á—Ç–µ, –æ—Ç–∫—É–¥–∞ –≤—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ –ø–∏—Å—å–º–æ
					–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ –ª–∏ –≤—ã –µ–≥–æ –≤–æ–æ–±—â–µ.
				</p>
				<p>
					–ù–∏–∫–∞–∫–∏—Ö cookies —Ç—É—Ç –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è. –ù–µ—Ç –Ω–∏–∫–∞–∫–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ —Ç—Ä–µ–∫–µ—Ä–æ–≤.
				</p>

				<hr>

				<p>–•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è!</p>

				<p><em>// –ê—Ä—Ç—ë–º (Raveny)</em></p>

				<p><button onclick=wat()>–Ø—Å–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ, –ø–æ–∫–∞–∂–∏—Ç–µ —Ñ–æ—Ä–º—É</button></p>
			</div>
		</content>

		<footer>
			<p ln=en>Made by <a href=https://github.com/artyomxx target=_blank>Artyom</a> (aka <a href=https://raveny.net target=_blank>Raveny</a>). PROG is not in any way affiliated with this.</p>
			<p ln=ru>–°–¥–µ–ª–∞–Ω–æ <a href=https://github.com/artyomxx target=_blank>–ê—Ä—Ç—ë–º–æ–º</a> (<a href=https://raveny.net target=_blank>Raveny</a>). PROG –Ω–µ –∏–º–µ–µ—Ç –∫ —ç—Ç–æ–º—É –Ω–∏–∫–∞–∫–æ–≥–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è.</p>
		</footer>
	</container>
</body>
</html>
